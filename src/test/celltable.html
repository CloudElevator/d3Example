<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>自动创建表格</title>
    <link rel="stylesheet" type="text/css" href="../../css/styles.css"/>
    <script type="text/javascript" src="../../lib/d3.js"></script>
    <script type="text/javascript" src="js/celltable.js" charset="utf-8"></script>
</head>

<body>

<p>这个例子学习自动创建一个固定行列数的表格</p>
<style>
    .redBg {
        background-color: red;
    }
</style>
<div class="tableDiv"></div>
<script type="text/javascript">
    /**显示第column列的标题*/

    var d3Table = null;
    var refresh = function () {
        d3Table = createMatrixTableByD3("body div.tableDiv", 6, 40);
        d3Table.table.attr("border", 3);
        d3Table.renderTBody();

        var cell34 = d3Table.getCell(2, 4);
        cell34.html("abc你好啊！");
    }
    var update = function () {
        var cell12 = d3Table.getCell(1, 2);
        cell12.attr("colspan", 2);
        var cell13 = d3Table.getCell(1, 3);
        cell13.remove();
    }
    var filterCellFunc = function (td, rowIndex, columnIndex) {
        if (rowIndex < 3 && columnIndex < 11) {
            return true;
        }
        return false;
    }
    var handleCellFunc = function (td, rowIndex, columnIndex) {
        if (rowIndex == 2 && columnIndex == 10) {
            td.attr("class","redBg");
            td.html("写个字看看");
        }
    }
    var scan = function () {
        d3Table.renderTd(handleCellFunc,filterCellFunc);
        //d3Table.renderTd(handleCellFunc);
    }
    refresh();
</script>
<button onclick="update()">修改一下</button>
<button onclick="refresh()">还原</button>
<button onclick="scan()">扫描一下</button>
</body>
</html>